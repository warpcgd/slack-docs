(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{597:function(t,s,e){t.exports=e.p+"assets/img/git.54cb9fc5.png"},598:function(t,s,e){t.exports=e.p+"assets/img/merge.f3e274be.png"},839:function(t,s,e){"use strict";e.r(s);var a=e(18),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"开发者指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发者指南"}},[t._v("#")]),t._v(" 开发者指南")]),t._v(" "),s("h2",{attrs:{id:"本地开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地开发"}},[t._v("#")]),t._v(" 本地开发")]),t._v(" "),s("p",[s("code",[t._v("slack")]),t._v("通过 lerna 管理各个包")]),t._v(" "),s("p",[t._v("按照下面的步骤即可本地开发"),s("code",[t._v("slack")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 克隆仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认为 dev 分支，包含 slack 的当前版本代码")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://git.duowan.com/webs/ikaixindou/common/slack.git\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换分支到 dev")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout dev\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" bootstrap\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dev\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建demo页面，浏览器访问 http://dev.ihago.net:8888/#/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dev:demo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建docs页面，浏览器访问 http://localhost:8080/a/slack-docs/guide/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dev:docs\n\n")])])]),s("h2",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("ul",[s("li",[t._v("仓库的组件代码位于 "),s("code",[t._v("packages")]),t._v(" 下，每个组件一个文件夹")]),t._v(" "),s("li",[t._v("docs 目录下是文档网站的代码，本地开发时可以在目录下运行 "),s("code",[t._v("npm run dev:docs")]),t._v(" 开启文档网站")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("slack\n├─ build     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Rollup构建")]),t._v("\n├─ packages  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 子包")]),t._v("\n   ├─ docs      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文档")]),t._v("\n   ├─ business  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 业务组件")]),t._v("\n   ├─ ui        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通用组件")]),t._v("\n      ├─ build      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建")]),t._v("\n      ├─ src        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件")]),t._v("\n      ├─ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试")]),t._v("\n      ├─ types      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 类型")]),t._v("\n   ├─ use       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通用工具")]),t._v("\n├─ plugins   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Rollup插件")]),t._v("\n└─ types     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 类型")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"添加新组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加新组件"}},[t._v("#")]),t._v(" 添加新组件")]),t._v(" "),s("p",[t._v("添加新组件时，请按照下面的目录结构组织文件，并在该文件中新增"),s("code",[t._v("README.md")]),t._v("中添加 demo 和参数")]),t._v(" "),s("p",[t._v("组件的技术栈为 "),s("code",[t._v("vue2.x")]),t._v(" + "),s("code",[t._v("Typescript")]),t._v(" + "),s("code",[t._v("vue-property-decorator")]),t._v(" + "),s("code",[t._v("css-module")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# example")]),t._v("\n\nsrc\n└─ button\n   ├─ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试")]),t._v("\n   ├─ button.vue        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件")]),t._v("\n   ├─ index.ts         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件入口")]),t._v("\n   ├─ button.scss       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件样式")]),t._v("\n   ├─ README.md        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文档")]),t._v("\n")])])]),s("h2",{attrs:{id:"预览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#预览"}},[t._v("#")]),t._v(" 预览")]),t._v(" "),s("p",[s("code",[t._v("slack")]),t._v("使用“懒人模式”实现 demo,文档和 demo 实现绑定，组件下"),s("code",[t._v("README.md")]),t._v("中的文件会自动加入 docs 文档中，可以直接在文档中实现"),s("code",[t._v("demo")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加这行在开头表示文档sidebar的名称")]),t._v("\n\n---\ntitle: Avatar 头像\n---\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# demo需要使用代码标示符 + ` demo`")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ```vue demo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  <template>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  </template>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  <script lang="ts">')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  <\/script>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ```")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"提交"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#提交"}},[t._v("#")]),t._v(" 提交")]),t._v(" "),s("h3",{attrs:{id:"分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[t._v("#")]),t._v(" 分支")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("master 主 release 分支，测试 + 构建 + npm 发布 + 文档构建")])]),t._v(" "),s("li",[t._v("hotfix master 修复分支，修复 master 线上问题")]),t._v(" "),s("li",[t._v("alpha 主 alpha 测试分支，测试 + 构建 + npm 发布 + 文档构建")]),t._v(" "),s("li",[s("strong",[t._v("dev 主开发分支，\b 目前开发版本")])]),t._v(" "),s("li",[t._v("feature-* 各个功能分支， 目前开发的功能")]),t._v(" "),s("li",[t._v("next 下一版本分支，用于 next 测试")]),t._v(" "),s("li",[t._v("v* 主版本分支，各版本稳定版本")])]),t._v(" "),s("h3",{attrs:{id:"提交流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#提交流程"}},[t._v("#")]),t._v(" 提交流程")]),t._v(" "),s("p",[s("img",{attrs:{src:e(597),alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("dev 主开发分支，可以合并至 alpha 和 master，每次合并前需 merge master 保证版本号最新")])]),t._v(" "),s("li",[t._v("feature 功能分支，可以合并至的 dev，每次合并前需 merge dev 保证代码更新")]),t._v(" "),s("li",[t._v("alpha 测试分支，主要为测试大版本更新及重要功能，只能合并开发分支，再合并到 master，单向流程")]),t._v(" "),s("li",[s("strong",[t._v("master 主发版分支，稳定版本分支，只能通过 Gitlab "),s("code",[t._v("merge request")]),t._v("合并，code view 后再进行发版")])]),t._v(" "),s("li",[t._v("hotfix 主版本修复分支，修复 master 问题后，合并前需 merge master 保证版本号最新")])]),t._v(" "),s("h3",{attrs:{id:"commit-规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commit-规范"}},[t._v("#")]),t._v(" commit 规范")]),t._v(" "),s("p",[t._v("参考 "),s("a",{attrs:{href:"https://www.conventionalcommits.org/en/v1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Conventional Commits"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("⚠️ 注意")]),t._v(" "),s("p",[t._v("fix 和 feat 注意增加 scope")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("feat(@yy/slack-ui): 添加组件新功能")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("fix(@yy/slack-ui): 修复组件bug")])])])]),t._v(" "),s("h3",{attrs:{id:"merge-requests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#merge-requests"}},[t._v("#")]),t._v(" Merge Requests")]),t._v(" "),s("p",[t._v("\b 参考 "),s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/257857632",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitlab 的 Code Review 最佳实践"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticStyle:{width:"1000px"}},[s("p",[s("img",{attrs:{src:e(598),alt:"img"}})])]),t._v(" "),s("p",[t._v("⚠️ 注意")]),t._v(" "),s("ol",[s("li",[t._v("PR 请填写审核相关信息")]),t._v(" "),s("li",[t._v("\b\b\b\bPR 请保证只有单一任务")]),t._v(" "),s("li",[t._v("\b\b\b\bPR 需保证测试覆盖率")]),t._v(" "),s("li",[t._v("审核人请填写组长("),s("a",{attrs:{href:"https://git.duowan.com/chenjiali",target:"_blank",rel:"noopener noreferrer"}},[t._v("@chenjiali"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("h2",{attrs:{id:"开源协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开源协议"}},[t._v("#")]),t._v(" 开源协议")]),t._v(" "),s("p",[t._v("本项目基于"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/MIT%E8%A8%B1%E5%8F%AF%E8%AD%89",target:"_blank",rel:"noopener noreferrer"}},[t._v("MIT"),s("OutboundLink")],1),t._v("协议")])])}),[],!1,null,null,null);s.default=n.exports}}]);